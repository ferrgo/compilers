//Gramática para a linguagem FORTRAN--, um subconjunto do FORTRAN 90 (com algumas adaptações)

//Equipe:
// Hugo Ferreira
// Luis Felipe Sampaio
// Oto Alves

Lexic

// Na nossa linguagem, os comentários começam com ! e vão até o fim da linha

ID           ->  LETTER(LETTER|DIGIT|_)*
LETTER       ->  [a-z]|[A-Z]
DIGIT        ->  [0-9]

LIT_INTEGER  ->  DIGIT+
LIT_LOGICAL  ->  .true. | .false.
LITERAL	     ->  LIT_INTEGER | LIT_LOGICAL

TYPE         -> INTEGER | LOGICAL

OP_LOGICAL   ->  <|<=|>|>=|==|!=

EOT          -> "\0000"

LP           -> (
RP           -> )

TOKEN        ->  ID | LIT_INTEGER | LIT_LOGICAL| OP_COMP | , | :: | = | LP | RP
               | IF | THEN | ELSE | END | ELSE | DO | WHILE | EXIT | CONTINUE
               | LIT_LOGICAL | LIT_INTEGER | PROGRAM | FUNCTION | SUBPROGRAM
               | PRINT | EOT | RETURN | TYPE | + | - | * | /

__________________________________________________________________________________________________________________________________________

Syntactic

PROG            ::= (DECLARATION)* (FUNCTION_DECL | SUBPROGRAM_DECL)*  PROG_MAIN EOT

PROG_MAIN       ::= PROGRAM ID (STATEMENT)* END PROGRAM
STATEMENT       ::= ( DECLARATION | ASSIGNMENT | IF_STATEMENT | LOOP | FUNCTION_CALL
						    | LOOP_CONTROL | RETURN_STMT | PRINT_STMT )
IF_STATEMENT    ::= IF EXPRESSION THEN (STATEMENT)* ( ELSE STATEMENT*)? END IF

LOOP            ::= DO WHILE LP EXPRESSION RP (STATEMENT)* END DO
LOOP_CONTROL    ::= LOOP_BREAK | LOOP_CONTINUE
LOOP_BREAK      ::= EXIT
LOOP_CONTINUE   ::= CONTINUE

DECLARATION     ::= TYPE :: ID (= EXPRESSION)? (,ID (= EXPRESSION)? )*

ASSIGNMENT      ::= ID = EXPRESSION

EXPRESSION      ::= EXP' (OP_COMP EXP')?
EXP'            ::= TERM EXP_ARIT
EXP_ARIT        ::= (+|-) TERM EXP_ARIT | epsilon
TERM            ::= FACTOR TERM'
TERM'           ::= (*|/) FACTOR TERM' | epsilon
FACTOR          ::= ID (FUNCTION_CALL)? | LITERAL | LP EXP RP

FUNCTION_CALL   ::= LP (EXPRESSION(,EXPRESSION)*)? RP

RETURN_STMT     ::= RETURN (ID)?
FUNCTION_DECL   ::= FUNCTION TYPE ID LP (TYPE :: ID (,TYPE :: ID)*)? RP (STATEMENT)* END FUNCTION
SUBPROGRAM_DECL ::= SUBPROGRAM ID LP (ID (,ID)*)? RP (STATEMENT)* END SUBPROGRAM

PRINT_STMT      ::= PRINT *, EXPRESSION
